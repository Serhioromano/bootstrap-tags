/*! bootstrap-tags 2013-05-07 */
https://github.com/Serhioromano/bootstrap-calendar.git
(function(t){"use strict";function o(o,n){this.options=t.extend(!0,{},e,n);var a=this;a.options.values_url&&t.ajax({dataType:"json",type:"get",async:!1,url:a.options.values_url}).done(function(o){"object"==typeof o&&(a.options.values=t.merge(a.options.values,o))}),a.options.values=a.options.onLoadDefaults(a.options.values);var i=t(document.createElement("span")).addClass("pills-list").appendTo(o);if(a.options.values=a._prepare(a.options.values),t.each(a.options.values,function(t,o){a.addTag(i,o)}),a.options.can_add){var s=[],r=[],p=t(document.createElement("input")).addClass("tag-input").attr({autocomplete:"off",type:"text"}).css("outline","none").typeahead({items:a.options.suggestion_limit,source:function(o){var e=t.merge([],a.options.suggestions);return s=[],r={},a.options.suggestion_url&&t.ajax({dataType:"json",type:"post",async:!1,url:a.options.suggestion_url,data:{q:o,limit:a.options.suggestion_limit}}).done(function(o){"object"==typeof o&&(e=t.merge(e,o))}),e=a.options.onLoadSuggestions(e),e=a._prepare(e),t.each(e,function(t,o){r[o.suggest]=o,s.push(o.suggest)}),s},updater:function(t){a._addTag(i,p,r[t])}}).click(function(t){t.stopPropagation()});0==a.options.only_suggestions&&p.keyup(function(o){t(this).val()&&13==o.keyCode&&a._addTag(i,t(this))});var l=t(a.options.templates.input_pill).append(p).append(t(a.options.templates.ok_icon).css("cursor","pointer").click(function(t){t.stopPropagation(),a._addTag(i,p),p.focus()})).hide().appendTo(o);t(a.options.templates.add_pill).addClass("add-pill").css("cursor","pointer").append(t(document.createElement("span")).attr({}).addClass("tag-add").append(a.options.templates.plus_icon)).click(function(){l.show(),p.focus();var o=t(this);o.hide(),setTimeout(function(){t("body").one("click",function(){l.hide(),o.show()})},200)}).appendTo(o)}}var e={values:[],values_url:"",templates:{pill:'<span class="badge badge-info tag-badge">{0}</span>',add_pill:'<span class="badge badge-success tag-badge">...</span>',input_pill:'<span class="badge badge-success tag-badge"></span>',number:" <sup><small>{0}</small></sup>",plus_icon:'<i class="icon-plus-sign tag-icon"></i>',delete_icon:'<i class="icon-remove-sign tag-icon" data-toggle="tooltip" title="Delete"></i>',ok_icon:'<i class="icon-ok-sign tag-icon"></i>'},limit:0,tag_link_target:"",can_delete:!0,can_add:!0,double_hilight:"#0B3549",input_name:"tags[]",lang:{"delete":"Delete",limit:"You have reached limit of only {0} tags to be added."},suggestion_limit:15,suggestion_url:"",suggestions:[],only_suggestions:!1,remove_url:"",onLoadDefaults:function(t){return t},onRemove:function(){},onError:function(t,o){alert(o)},onBeforeAdd:function(t){return t},onLoadSuggestions:function(t){return t}};o.prototype._prepare=function(o){return t.each(o,function(t,e){return e?("string"==typeof e&&(o[t]={id:e,text:e,suggest:e}),o[t].suggest=o[t].suggest||o[t].text,o[t].url=e.url||"",o[t].title=e.title||"",o[t].num=parseInt(e.num||"0"),void 0):(delete o[t],!0)}),o},o.prototype._addTag=function(t,o,e){e||(e=this._prepare([o.val()])[0]),this.addTag(t,e)&&o.val("").focus()},o.prototype.addTag=function(o,e){var n=this;if(!e)return!1;if(parseInt(n.options.limit)>0&&o.children().length>=parseInt(n.options.limit))return n.options.onError(10,n.options.lang.limit.format(n.options.limit)),!1;e.id&&e.text||(n.options.onError(11,"Not correct object format to create tag/pill"),t.error("Not correct object format to create tag/pill"));var a="";if(t.each(o.children(),function(o,n){return(""+e.id).toLowerCase()==(""+t(n).data("tag-id")).toLowerCase()?(a=t(n),!1):void 0}),a){var i=t(o.children()[0]).css("background-color");return a.stop().animate({backgroundColor:n.options.double_hilight},100,"swing",function(){a.stop().animate({backgroundColor:i},100,"swing",function(){a.css("background-color","")})}),!1}if(e.url){var s=e.title?' data-toggle="tooltip" title="'+e.title+'"':"";e.text='<a class="tag-link" '+s+' target="'+n.options.tag_link_target+'" href="'+e.url+'">'+e.text+"</a>"}var r="";n.options.can_delete&&(r=t(document.createElement("a")).attr({href:"javascript:void(0)","class":"tag-remove"}).html(""+n.options.templates.delete_icon).click(function(){n.removeTag(this)}));var p=e.num>0?n.options.templates.number.format(e.num):"",l=t(n.options.templates.pill.format(e.text)).attr("data-tag-id",e.id).append(p,r,t(document.createElement("input")).attr({"data-tag-hidden":e.id,name:n.options.input_name,type:"hidden",value:e.id})).css({overflow:"hidden","white-space":"nowrap"});return l=n.options.onBeforeAdd(l,e),o.append(l),t('[data-toggle="tooltip"]').tooltip(),!0},o.prototype.removeTag=function(o){var e=this;t(o).closest("[data-tag-id]").animate({width:0,"padding-right":0,"padding-left":0},200,"swing",function(){var o=t(this);e.options.remove_url&&t.ajax({dataType:"json",type:"post",async:!1,url:e.options.remove_url,data:{id:o.data("tag-id")}}),e.options.onRemove(o),o.remove()})},t.fn.tags=function(e){return this.each(function(){new o(t(this),e)})}})(window.jQuery),String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(o,e){return t[e]!==void 0?t[e]:o})});